{"version":3,"sources":["token/Store.js","pages/Login.js","pages/Registration.js","pages/Todos.js","App.js","serviceWorker.js","index.js"],"names":["token$","BehaviorSubject","JSON","parse","localStorage","getItem","updateToken","newToken","setItem","stringify","next","Login","props","state","token","profile","email","password","login","register","error","errorMessage","onLogin","bind","handleMailChange","handlePassChange","toRegister","e","preventDefault","axios","post","this","then","response","setState","data","console","log","setTimeout","catch","n","toString","split","errorCode","length","target","value","errorStyle","display","color","fontWeight","to","className","style","onSubmit","type","onChange","name","required","autoComplete","id","onClick","tabIndex","onKeyDown","visibility","xmlns","xmlnsXlink","viewBox","preserveAspectRatio","shapeRendering","d","xlinkHref","x","y","fill","React","Component","Registration","repeat","onRegister","handleRepeatChange","toLogin","jwt","require","date","Date","toLocaleDateString","weekday","year","month","day","Todos","input","todos","new_todo","content","getTodos","onTodoChange","onAdd","onDelete","onLogout","subscription","subscribe","decoded","decode","get","headers","Authorization","alert","stateCopy","Object","assign","todo","joined","concat","targetedList","parentElement","delete","unsubscribe","border","map","items","key","App","redirect","window","location","pathname","path","component","Boolean","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.98ceff03.chunk.js","sourcesContent":["import { BehaviorSubject } from 'rxjs';\r\n\r\n\r\nexport const token$ = new BehaviorSubject(JSON.parse(localStorage.getItem(\"token\")));\r\nexport function updateToken(newToken) {\r\n  localStorage.setItem('token', JSON.stringify(newToken));\r\n  token$.next(newToken);\r\n}\r\n","import React from 'react';\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Helmet } from 'react-helmet-async';\r\nimport { updateToken } from '../token/Store.js';\r\nimport axios from 'axios';\r\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\r\nimport '../styles/Login.css';\r\n\r\nclass Login extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      token: '',\r\n      profile: {},\r\n      email: '',\r\n      password: '',\r\n      login: false,\r\n      register: false,\r\n      error: 'none',\r\n      errorMessage: '',\r\n\r\n    }\r\n    this.onLogin = this.onLogin.bind(this);\r\n    this.handleMailChange = this.handleMailChange.bind(this);\r\n    this.handlePassChange = this.handlePassChange.bind(this);\r\n    this.toRegister = this.toRegister.bind(this);\r\n  }\r\n\r\n\r\n  onLogin (e) {\r\n    e.preventDefault();\r\n\r\n    axios.post('http://3.120.96.16:3002/auth',\r\n    { email: this.state.email,\r\n      password: this.state.password\r\n    })\r\n    .then((response) => {\r\n      this.setState({\r\n        error: 'none',\r\n        errorMessage: '',\r\n      })\r\n      updateToken(response.data.token);\r\n      console.log(response);\r\n      setTimeout(\r\n        function() {\r\n      this.setState({\r\n        token: response.data.token,\r\n        login: true,\r\n      })\r\n    }\r\n    .bind(this),\r\n    1000);\r\n    })\r\n  .catch((response) => {\r\n    let error = response.toString();\r\n    let n = error.split(\" \");\r\n    let errorCode = n[n.length - 1];\r\n\r\n    if (errorCode === \"400\") {\r\n      this.setState({\r\n        error: 'inline',\r\n        errorMessage: 'Incorrect input (400)'\r\n        })\r\n      }\r\n    if (errorCode === \"401\") {\r\n      this.setState({\r\n        error: 'inline',\r\n        errorMessage: 'Account does not exist (401)'\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  handleMailChange (e) {\r\n    this.setState({email: e.target.value})\r\n  }\r\n\r\n  handlePassChange (e) {\r\n    this.setState({password: e.target.value})\r\n  }\r\n\r\n  toRegister () {\r\n    this.setState({register: true})\r\n  }\r\n\r\n  render () {\r\n\r\n    let errorStyle = {\r\n        display: this.state.error,\r\n        color: '#e64848',\r\n        fontWeight: 'bold',\r\n      }\r\n\r\n    if (this.state.login) {\r\n      return  <Redirect to={'/todos'}></Redirect>\r\n    }\r\n    if (this.state.register) {\r\n      return <Redirect to={'/register'}></Redirect>\r\n    }\r\n    return (\r\n      <div className=\"Login\">\r\n        <Helmet>\r\n          <title>Login</title>\r\n        </Helmet>\r\n        <header className=\"loginHeader\">\r\n          <div className=\"inner-header flex\">\r\n            <div className=\"wrapper\">\r\n            <h1>Login</h1>\r\n            <br></br>\r\n            <p style={errorStyle}>{this.state.errorMessage}</p>\r\n            <form onSubmit={this.onLogin}>\r\n              <label>Email:</label>\r\n              <input type=\"text\" value={this.state.email} onChange={this.handleMailChange} name=\"user\" required/>\r\n              <br></br>\r\n              <label>Password:</label>\r\n              <input type=\"password\" value={this.state.password} onChange={this.handlePassChange} name=\"pass\" autoComplete=\"on\" onSubmit={this.onLogin} required />\r\n              <br></br>\r\n              <p id=\"register-link\" onClick={this.toRegister}>Don't have an account?</p>\r\n              <div className=\"button-container\" onClick={this.onLogin}>\r\n                <div className=\"button\">\r\n                  <div tabIndex='0' onKeyDown={this.onLogin} className=\"icon\">\r\n                    <i> <ArrowForwardIcon /> </i>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <button type=\"submit\" style={{visibility: 'hidden'}}></button>\r\n            </form>\r\n          </div>\r\n         </div>\r\n\r\n          <div>\r\n            <svg className=\"waves\" xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 24 150 28\" preserveAspectRatio=\"none\" shapeRendering=\"auto\">\r\n              <defs>\r\n                <path id=\"gentle-wave\" d=\"M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z\" />\r\n              </defs>\r\n              <g className=\"parallax\">\r\n                <use xlinkHref=\"#gentle-wave\" x=\"48\" y=\"0\" fill=\"rgba(248,205,218,0.7)\" />\r\n                <use xlinkHref=\"#gentle-wave\" x=\"48\" y=\"3\" fill=\"rgba(248,205,218,0.5)\" />\r\n                <use xlinkHref=\"#gentle-wave\" x=\"48\" y=\"5\" fill=\"rgba(248,205,218,0.3)\" />\r\n                <use xlinkHref=\"#gentle-wave\" x=\"48\" y=\"7\" fill=\"#F8CDDA\" />\r\n              </g>\r\n            </svg>\r\n          </div>\r\n        </header>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default Login;\r\n","import React from 'react';\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Helmet } from 'react-helmet-async';\r\nimport { updateToken } from '../token/Store.js';\r\nimport axios from 'axios';\r\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\r\nimport '../styles/Register.css';\r\n\r\n\r\nclass Registration extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      token: '',\r\n      profile: {},\r\n      email: '',\r\n      password: '',\r\n      repeat: '',\r\n      register: false,\r\n      login: false,\r\n      error: 'none',\r\n      errorMessage: '',\r\n\r\n    }\r\n    this.onRegister = this.onRegister.bind(this);\r\n    this.handleMailChange = this.handleMailChange.bind(this);\r\n    this.handlePassChange = this.handlePassChange.bind(this);\r\n    this.handleRepeatChange = this.handleRepeatChange.bind(this);\r\n    this.toLogin = this.toLogin.bind(this);\r\n  }\r\n\r\n  onRegister (e) {\r\n    e.preventDefault();\r\n    if (this.state.repeat !== this.state.password) {\r\n      this.setState({errorMessage: 'Password does not match.'})\r\n      return;\r\n    }\r\n    axios.post('http://3.120.96.16:3002/register',\r\n    { email: this.state.email,\r\n      password: this.state.password\r\n    })\r\n    .then((response) => {\r\n      return axios.post('http://3.120.96.16:3002/auth',\r\n      { email: this.state.email,\r\n        password: this.state.password\r\n      });\r\n    })\r\n    .then((response) => {\r\n      this.setState({\r\n        error: 'none',\r\n        errorMessage: '',\r\n      })\r\n      updateToken(response.data.token);\r\n      console.log(response);\r\n      setTimeout(\r\n        function() {\r\n      this.setState({\r\n        token: response.data.token,\r\n        register: true,\r\n      })\r\n    }\r\n    .bind(this),\r\n    1000);\r\n    })\r\n  .catch((response) => {\r\n    let error = response.toString();\r\n    let n = error.split(\" \");\r\n    let errorCode = n[n.length - 1];\r\n    if (errorCode === \"400\") {\r\n      this.setState({\r\n        error: 'inline',\r\n        errorMessage: 'Incorrect input (400)'\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  handleMailChange (e) {\r\n    this.setState({email: e.target.value})\r\n  }\r\n\r\n  handlePassChange (e) {\r\n    this.setState({password: e.target.value})\r\n  }\r\n\r\n  handleRepeatChange (e) {\r\n    this.setState({repeat: e.target.value});\r\n  }\r\n\r\n  toLogin () {\r\n      this.setState({login: true})\r\n  }\r\n\r\n\r\n  render () {\r\n\r\n    let errorStyle = {\r\n        display: this.state.error,\r\n        color: '#e64848',\r\n        fontWeight: 'bold',\r\n      }\r\n\r\n      if (this.state.register) {\r\n        return  <Redirect to={'/todos'}></Redirect>\r\n      }\r\n\r\n      if (this.state.login) {\r\n        return <Redirect to={'/login'}></Redirect>\r\n      }\r\n\r\n    return (\r\n\r\n      <div className=\"Register\">\r\n        <Helmet>\r\n          <title>Register</title>\r\n        </Helmet>\r\n        <header className=\"registerHeader\">\r\n          <div className=\"inner-header flex\">\r\n            <div className=\"wrapper\">\r\n            <h1>Register</h1>\r\n            <br></br>\r\n            <p style={errorStyle}>{this.state.errorMessage}</p>\r\n            <form onSubmit={this.onRegister}>\r\n              <label>Email:</label>\r\n              <input type=\"text\" value={this.state.email} onChange={this.handleMailChange} name=\"user\" required />\r\n              <br></br>\r\n              <label>Password:</label>\r\n              <input type=\"password\" value={this.state.password} onChange={this.handlePassChange} name=\"pass\" autoComplete=\"on\" required/>\r\n              <br></br>\r\n              <label>Repeat password:</label>\r\n              <input type=\"password\" value={this.state.repeat} onChange={this.handleRepeatChange} name=\"repeatpass\" autoComplete=\"on\" required />\r\n              <br></br>    \r\n              <p id=\"login-link\" onClick={this.toLogin}>Already have an account?</p>\r\n              <div className=\"button-container\" onClick={this.onRegister}>\r\n                <div className=\"button\">\r\n                  <div tabIndex='0' onKeyDown={this.onLogin} className=\"icon\">\r\n                    <i> <ArrowForwardIcon /> </i>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <button type=\"submit\" style={{visibility: 'hidden'}}></button>\r\n            </form>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <svg className=\"waves\" xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 24 150 28\" preserveAspectRatio=\"none\" shapeRendering=\"auto\">\r\n              <defs>\r\n                <path id=\"gentle-wave\" d=\"M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z\" />\r\n              </defs>\r\n              <g className=\"parallax\">\r\n                <use xlinkHref=\"#gentle-wave\" x=\"48\" y=\"0\" fill=\"rgba(248,205,218,0.7)\" />\r\n                <use xlinkHref=\"#gentle-wave\" x=\"48\" y=\"3\" fill=\"rgba(248,205,218,0.5)\" />\r\n                <use xlinkHref=\"#gentle-wave\" x=\"48\" y=\"5\" fill=\"rgba(248,205,218,0.3)\" />\r\n                <use xlinkHref=\"#gentle-wave\" x=\"48\" y=\"7\" fill=\"#F8CDDA\" />\r\n              </g>\r\n            </svg>\r\n          </div>\r\n        </header>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default Registration;\r\n","import React from 'react';\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Helmet } from 'react-helmet-async';\r\nimport { token$, updateToken } from '../token/Store.js';\r\nimport axios from 'axios';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport '../styles/Todo.css';\r\nlet jwt = require('jsonwebtoken');\r\nconst options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\r\nconst date = new Date().toLocaleDateString(\"SV-se\", options);\r\nclass Todos extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      email: '',\r\n      input: '',\r\n      todos: [],\r\n      new_todo: {\r\n        content: '',\r\n        id: '',\r\n      },\r\n      date: date,\r\n      error: 'hidden',\r\n      login: false,\r\n      register: false,\r\n      token: '',\r\n    }\r\n    this.getTodos = this.getTodos.bind(this);\r\n    this.onTodoChange = this.onTodoChange.bind(this);\r\n    this.onAdd = this.onAdd.bind(this);\r\n    this.onDelete = this.onDelete.bind(this);\r\n    this.toRegister = this.toRegister.bind(this);\r\n    this.toLogin = this.toLogin.bind(this);\r\n    this.onLogout = this.onLogout.bind(this);\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.getTodos();\r\n    console.log(this.state.date)\r\n  }\r\n\r\n  getTodos () {\r\n    this.subscription = token$.subscribe((token) => {\r\n      if (token) {\r\n      console.log(token);\r\n      this.setState({token: token})\r\n      let decoded = jwt.decode(token);\r\n      console.log(decoded);\r\n      if(decoded) {\r\n        this.setState({email: decoded.email})\r\n      }\r\n        axios.get('http://3.120.96.16:3002/todos', {\r\n          headers: {\r\n            Authorization: 'Bearer ' + token\r\n          }\r\n        })\r\n        .then((response) => {\r\n          this.setState({todos: response.data.todos})\r\n          console.log(response.data.todos);\r\n        })\r\n      }\r\n      else if (!this.state.token) {\r\n        alert(\"Please login to use the app.\")\r\n        this.setState({login: true})\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  onTodoChange (e) {\r\n    this.setState({input: e.target.value})\r\n  }\r\n\r\n  onAdd (e) {\r\n    e.preventDefault();\r\n    this.subscription = token$.subscribe((token) => {\r\n    axios.post('http://3.120.96.16:3002/todos', {\r\n      content: this.state.input }, {\r\n      headers: {\r\n        Authorization: 'Bearer ' + token\r\n        }\r\n      })\r\n      .then((response) => {\r\n        this.setState({\r\n          input: '',\r\n          error: 'hidden'\r\n        })\r\n        let stateCopy = Object.assign({}, this.state);\r\n        stateCopy.new_todo.content = response.data.todo.content;\r\n        stateCopy.new_todo.id = response.data.todo.id;\r\n        this.setState(stateCopy);\r\n        console.log(this.state.new_todo)\r\n        let joined = this.state.todos.concat(this.state.new_todo);\r\n        this.setState({todos: joined})\r\n        this.setState({new_todo: {\r\n          content: '',\r\n          id: '',\r\n        }})\r\n        console.log(this.state.todos);\r\n      })\r\n      .catch((response) => {\r\n        console.log(response)\r\n        this.setState({error: 'visible'})\r\n      })\r\n    })\r\n  }\r\n\r\n  onDelete (e) {\r\n    e.preventDefault();\r\n    console.log(e.target)\r\n    let targetedList = e.target.parentElement.parentElement.id;\r\n    console.log(targetedList)\r\n    axios.delete(`http://3.120.96.16:3002/todos/${targetedList}`, {\r\n      headers: {\r\n        Authorization: 'Bearer ' + token$.value\r\n        }\r\n    })\r\n      .then((response) => {\r\n        this.getTodos();\r\n        console.log(response)\r\n      })\r\n      .catch((response) => {\r\n        console.log(response)\r\n      })\r\n  }\r\n\r\n  toRegister () {\r\n    this.setState({register: true})\r\n  }\r\n\r\n\r\n  toLogin () {\r\n    this.setState({login: true})\r\n  }\r\n\r\n  onLogout (e) {\r\n    e.preventDefault();\r\n    updateToken('');\r\n    this.setState({login: true});\r\n\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    this.subscription.unsubscribe();\r\n  }\r\n\r\n  render () {\r\n    if (this.state.login) {\r\n      return  <Redirect to={'/login'}></Redirect>\r\n    }\r\n    return (\r\n      <div className=\"Todos\">\r\n        <Helmet>\r\n          <title>Todos</title>\r\n        </Helmet>\r\n        <header className=\"todoHeader\">\r\n          <div className=\"inner-header flex\">\r\n            <h1>Welcome {this.state.email}</h1>\r\n          </div>\r\n          <div className=\"links\">\r\n          </div>\r\n          <p id=\"signout\" onClick={this.onLogout}>Sign out</p>\r\n          <div>\r\n            <svg className=\"waves\" xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 24 150 28\" preserveAspectRatio=\"none\" shapeRendering=\"auto\">\r\n              <defs>\r\n                <path id=\"gentle-wave\" d=\"M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z\" />\r\n              </defs>\r\n              <g className=\"parallax\">\r\n                <use xlinkHref=\"#gentle-wave\" x=\"48\" y=\"0\" fill=\"rgba(248,205,218,0.7)\" />\r\n                <use xlinkHref=\"#gentle-wave\" x=\"48\" y=\"3\" fill=\"rgba(248,205,218,0.5)\" />\r\n                <use xlinkHref=\"#gentle-wave\" x=\"48\" y=\"5\" fill=\"rgba(248,205,218,0.3)\" />\r\n                <use xlinkHref=\"#gentle-wave\" x=\"48\" y=\"7\" fill=\"#F8CDDA\" />\r\n              </g>\r\n            </svg>\r\n          </div>\r\n        </header>\r\n        <main>\r\n          <div>\r\n            <div className=\"todo\">\r\n              <div className=\"cardtop\">\r\n                <form onSubmit={this.onAdd}>\r\n                  <div className=\"topcontent\">\r\n                    <p id=\"new\"> Add new todo item: </p>\r\n                    <input type=\"text\" value={this.state.input} onChange={this.onTodoChange} style={this.state.error === 'visible' ? {border: '1px solid #f79ac3'} : {border: 'none'} } />\r\n                    <p id=\"error\" style={{visibility: this.state.error}}>Invalid input</p>\r\n                    <div className=\"button-container\" onClick={this.onAdd}>\r\n                      <div className=\"button\">\r\n                        <div className=\"icon\">\r\n                          <i><AddIcon /> </i>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <p id=\"datetext\">{this.state.date}</p>\r\n                      </div>\r\n                      </form>\r\n              </div>\r\n              <div className=\"cardbottom\">\r\n                <ul>\r\n                  {this.state.todos.map((items) =>\r\n                    <li id={items.id} key={items.id}>{items.content}\r\n                      <button id={items.id} onClick={this.onDelete}>\r\n                        <DeleteIcon />\r\n                      </button>\r\n                      <hr></hr>\r\n                    </li>\r\n                  )}\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default Todos;\r\n","import React from 'react';\nimport Login from './pages/Login.js';\nimport Registration from './pages/Registration.js';\nimport Todos from './pages/Todos.js';\nimport { BrowserRouter as Router, Route, Redirect } from \"react-router-dom\";\nimport { HelmetProvider } from 'react-helmet-async';\nimport './styles/Login.css';\nimport './styles/Todo.css';\n\n\nclass App extends React.Component {\n\n\n  render () {\n\n    let redirect;\n    if (window.location.pathname === \"/\") {\n      redirect = <Redirect to=\"/login\" />\n    }\n\n    return (\n      <HelmetProvider>\n        <Router>\n          {redirect}\n          <Route path=\"/login\" component={Login} />\n          <Route path=\"/register\" component={Registration} />\n          <Route path=\"/todos\" component={Todos} />\n      </Router>\n    </HelmetProvider>\n    )\n  }\n}\n\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}